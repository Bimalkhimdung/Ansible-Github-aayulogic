name: ansible run action

on:
  push:
    branches:
      - main
jobs:
  ansible_installation:
    runs-on: ubuntu-latest

    steps:
     - name: checking code
       uses: actions/checkout@v2

     - name: installing python
       uses: actions/setup-python@v1
       with:
         python-version: "3.8"
     - name: installing ansible
       run: pip install ansible ansible-lint     
     - name: Configuring ssh connection
       uses: webfactory/ssh-agent@v0.5.1
       with:
         ssh-private-key: ${{ secrets.SERVER_PRIVATE_KEY }}

     - name: running playbook
       run: ansible-playbook ./Playbook/gitaction.yml -i inventory

            
